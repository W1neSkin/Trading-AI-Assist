<Window x:Class="TradingAiAssist.Admin.WPF.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:views="clr-namespace:TradingAiAssist.Admin.WPF.Views"
        Title="Trading AI Assist - Admin Dashboard" 
        Height="900" Width="1400"
        WindowStartupLocation="CenterScreen"
        MinHeight="600" MinWidth="1000"
        Background="{DynamicResource MaterialDesignPaper}"
        TextElement.Foreground="{DynamicResource MaterialDesignBody}"
        FontFamily="{DynamicResource MaterialDesignFont}">

    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Top App Bar -->
        <materialDesign:ColorZone Grid.Row="0" Mode="PrimaryMid" Padding="16" materialDesign:ElevationAssist.Elevation="Dp4">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Menu Toggle Button -->
                <Button Grid.Column="0" 
                        Style="{DynamicResource MaterialDesignIconButton}"
                        Command="{Binding ToggleMenuCommand}"
                        ToolTip="Toggle Menu">
                    <materialDesign:PackIcon Kind="Menu" />
                </Button>

                <!-- Title -->
                <TextBlock Grid.Column="1" 
                           Text="Trading AI Assist - Admin Dashboard"
                           Style="{DynamicResource MaterialDesignHeadline6TextBlock}"
                           VerticalAlignment="Center"
                           Margin="16,0,0,0"/>

                <!-- User Info and Actions -->
                <StackPanel Grid.Column="2" 
                            Orientation="Horizontal" 
                            VerticalAlignment="Center">
                    
                    <!-- Notifications -->
                    <Button Style="{DynamicResource MaterialDesignIconButton}"
                            Command="{Binding ShowNotificationsCommand}"
                            ToolTip="Notifications">
                        <materialDesign:PackIcon Kind="Bell" />
                        <Button.Badge>
                            <TextBlock Text="{Binding NotificationCount}" 
                                       Foreground="White" 
                                       FontSize="10"/>
                        </Button.Badge>
                    </Button>

                    <!-- User Menu -->
                    <Button Style="{DynamicResource MaterialDesignIconButton}"
                            Command="{Binding ShowUserMenuCommand}"
                            ToolTip="User Menu">
                        <materialDesign:PackIcon Kind="Account" />
                    </Button>

                    <!-- Logout -->
                    <Button Style="{DynamicResource MaterialDesignIconButton}"
                            Command="{Binding LogoutCommand}"
                            ToolTip="Logout">
                        <materialDesign:PackIcon Kind="Logout" />
                    </Button>
                </StackPanel>
            </Grid>
        </materialDesign:ColorZone>

        <!-- Main Content -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Navigation Drawer -->
            <materialDesign:DrawerHost Grid.Column="0" 
                                       IsLeftDrawerOpen="{Binding IsMenuOpen}"
                                       LeftDrawerCornerRadius="0 8 8 0">
                <materialDesign:DrawerHost.LeftDrawerContent>
                    <StackPanel Width="280" Background="{DynamicResource MaterialDesignPaper}">
                        
                        <!-- User Profile Section -->
                        <Border Background="{DynamicResource MaterialDesignDivider}" 
                                Padding="16" 
                                Margin="0,0,0,8">
                            <StackPanel>
                                <materialDesign:PackIcon Kind="AccountCircle" 
                                                         Width="48" 
                                                         Height="48" 
                                                         HorizontalAlignment="Center"
                                                         Foreground="{DynamicResource MaterialDesignPrimary}"/>
                                <TextBlock Text="{Binding CurrentUser.DisplayName}" 
                                           Style="{DynamicResource MaterialDesignSubtitle1TextBlock}"
                                           HorizontalAlignment="Center"
                                           Margin="0,8,0,0"/>
                                <TextBlock Text="{Binding CurrentUser.Email}" 
                                           Style="{DynamicResource MaterialDesignCaptionTextBlock}"
                                           HorizontalAlignment="Center"
                                           Foreground="{DynamicResource MaterialDesignBodyLight}"/>
                            </StackPanel>
                        </Border>

                        <!-- Navigation Menu -->
                        <ScrollViewer VerticalScrollBarVisibility="Auto">
                            <StackPanel Margin="8">
                                
                                <!-- Dashboard -->
                                <Button Style="{DynamicResource MaterialDesignFlatButton}"
                                        Command="{Binding NavigateCommand}"
                                        CommandParameter="Dashboard"
                                        HorizontalAlignment="Stretch"
                                        HorizontalContentAlignment="Left"
                                        Padding="16,12">
                                    <StackPanel Orientation="Horizontal">
                                        <materialDesign:PackIcon Kind="ViewDashboard" 
                                                                 Margin="0,0,16,0"/>
                                        <TextBlock Text="Dashboard" 
                                                   VerticalAlignment="Center"/>
                                    </StackPanel>
                                </Button>

                                <!-- User Management -->
                                <Button Style="{DynamicResource MaterialDesignFlatButton}"
                                        Command="{Binding NavigateCommand}"
                                        CommandParameter="UserManagement"
                                        HorizontalAlignment="Stretch"
                                        HorizontalContentAlignment="Left"
                                        Padding="16,12">
                                    <StackPanel Orientation="Horizontal">
                                        <materialDesign:PackIcon Kind="AccountGroup" 
                                                                 Margin="0,0,16,0"/>
                                        <TextBlock Text="User Management" 
                                                   VerticalAlignment="Center"/>
                                    </StackPanel>
                                </Button>

                                <!-- AI Analytics -->
                                <Button Style="{DynamicResource MaterialDesignFlatButton}"
                                        Command="{Binding NavigateCommand}"
                                        CommandParameter="AiAnalytics"
                                        HorizontalAlignment="Stretch"
                                        HorizontalContentAlignment="Left"
                                        Padding="16,12">
                                    <StackPanel Orientation="Horizontal">
                                        <materialDesign:PackIcon Kind="Brain" 
                                                                 Margin="0,0,16,0"/>
                                        <TextBlock Text="AI Analytics" 
                                                   VerticalAlignment="Center"/>
                                    </StackPanel>
                                </Button>

                                <!-- System Health -->
                                <Button Style="{DynamicResource MaterialDesignFlatButton}"
                                        Command="{Binding NavigateCommand}"
                                        CommandParameter="SystemHealth"
                                        HorizontalAlignment="Stretch"
                                        HorizontalContentAlignment="Left"
                                        Padding="16,12">
                                    <StackPanel Orientation="Horizontal">
                                        <materialDesign:PackIcon Kind="MonitorDashboard" 
                                                                 Margin="0,0,16,0"/>
                                        <TextBlock Text="System Health" 
                                                   VerticalAlignment="Center"/>
                                    </StackPanel>
                                </Button>

                                <!-- Settings -->
                                <Button Style="{DynamicResource MaterialDesignFlatButton}"
                                        Command="{Binding NavigateCommand}"
                                        CommandParameter="Settings"
                                        HorizontalAlignment="Stretch"
                                        HorizontalContentAlignment="Left"
                                        Padding="16,12">
                                    <StackPanel Orientation="Horizontal">
                                        <materialDesign:PackIcon Kind="Settings" 
                                                                 Margin="0,0,16,0"/>
                                        <TextBlock Text="Settings" 
                                                   VerticalAlignment="Center"/>
                                    </StackPanel>
                                </Button>

                            </StackPanel>
                        </ScrollViewer>
                    </StackPanel>
                </materialDesign:DrawerHost.LeftDrawerContent>

                <!-- Main Content Area -->
                <Grid Grid.Column="1">
                    <ContentControl Content="{Binding CurrentView}" />
                </Grid>

            </materialDesign:DrawerHost>
        </Grid>

        <!-- Status Bar -->
        <materialDesign:ColorZone Grid.Row="2" 
                                   Mode="PrimaryLight" 
                                   Padding="8,4" 
                                   materialDesign:ElevationAssist.Elevation="Dp2">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Status Message -->
                <TextBlock Grid.Column="0" 
                           Text="{Binding StatusMessage}" 
                           Style="{DynamicResource MaterialDesignCaptionTextBlock}"
                           VerticalAlignment="Center"/>

                <!-- Connection Status -->
                <StackPanel Grid.Column="1" 
                            Orientation="Horizontal" 
                            VerticalAlignment="Center">
                    <materialDesign:PackIcon Kind="Wifi" 
                                             Width="16" 
                                             Height="16"
                                             Foreground="{Binding IsConnected, Converter={StaticResource ConnectionStatusConverter}}"/>
                    <TextBlock Text="{Binding ConnectionStatus}" 
                               Style="{DynamicResource MaterialDesignCaptionTextBlock}"
                               Margin="4,0,0,0"/>
                </StackPanel>
            </Grid>
        </materialDesign:ColorZone>

        <!-- Loading Overlay -->
        <Grid Grid.RowSpan="3" 
              Style="{StaticResource LoadingOverlayStyle}"
              Visibility="{Binding IsLoading, Converter={StaticResource BooleanToVisibilityConverter}}">
            <StackPanel HorizontalAlignment="Center" 
                        VerticalAlignment="Center">
                <ProgressBar IsIndeterminate="True" 
                             Width="100" 
                             Height="4" 
                             Margin="0,0,0,16"/>
                <TextBlock Text="Loading..." 
                           Style="{DynamicResource MaterialDesignBody1TextBlock}"
                           HorizontalAlignment="Center"/>
            </StackPanel>
        </Grid>

    </Grid>
</Window> 